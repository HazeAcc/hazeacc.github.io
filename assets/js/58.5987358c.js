(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{261:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"this"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this","aria-hidden":"true"}},[t._v("#")]),t._v(" this")]),t._v(" "),a("p",[t._v("JavaScript 的"),a("code",[t._v("this")]),t._v("相比其他语言有那么一点不同，它在不同的情况下有着不同的指向，具有相当的灵活性。")]),t._v(" "),a("p",[t._v("但是这也导致它的指向并不是一如表面那么直接，在不同的情况下，我们要考虑这里的"),a("code",[t._v("this")]),t._v("到底指向了什么。（那么，代价是什么.jpg）")]),t._v(" "),a("br"),t._v(" "),a("hr"),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"从函数讲起"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从函数讲起","aria-hidden":"true"}},[t._v("#")]),t._v(" 从函数讲起")]),t._v(" "),a("p",[t._v("我们日常见到的"),a("code",[t._v("this")]),t._v("基本都出现在函数中，这是因为如果在全局上下文中调用"),a("code",[t._v("this")]),t._v("，实际上就是调用"),a("code",[t._v("window")]),t._v("，而在全局中这是可以忽略的。")]),t._v(" "),a("p",[t._v("例如全局变量，实际上它们的命名空间在"),a("code",[t._v("window")]),t._v("对象上，函数也是如此，即便是有些内置的函数"),a("code",[t._v("setTimeout()")]),t._v("，其实完整的写法是"),a("code",[t._v("window.setTimeout()")]),t._v("。")]),t._v(" "),a("p",[t._v("那么，函数中的"),a("code",[t._v("this")]),t._v("指向的又是谁呢？")]),t._v(" "),a("p",[t._v("在其他面向对象的语言中，一般是在“class 类”中使用到"),a("code",[t._v("this")]),t._v("指针，然后使用"),a("code",[t._v("new 类名")]),t._v("来创建对象，"),a("code",[t._v("this")]),t._v("指向的往往就是创建的对象本身。")]),t._v(" "),a("p",[t._v("而在 JavaScript 中，对象是通过"),a("code",[t._v("new 构造函数")]),t._v("来创建的（先忽略 ES6 新加入的 class 语法），看起来我们的"),a("code",[t._v("this")]),t._v("和其他语言没有什么区别，运行的效果也是和我们所期望的一致。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyNum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("setNum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyNum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0")]),t._v("\n\nnum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 42")]),t._v("\n")])])]),a("p",[t._v("但是，JavaScript 的函数中的"),a("code",[t._v("this")]),t._v("实际上指向的是"),a("strong",[t._v("调用该函数的调用者")]),t._v("。")]),t._v(" "),a("blockquote",[a("p",[t._v("在 ES6 以后，使用"),a("code",[t._v("use strict")]),t._v("模式，则在全局环境中调用函数，函数中的"),a("code",[t._v("this")]),t._v("不再指向"),a("code",[t._v("window")]),t._v("而是指向"),a("code",[t._v("undefined")])])]),t._v(" "),a("h1",{attrs:{id:"写不下去了"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写不下去了","aria-hidden":"true"}},[t._v("#")]),t._v(" 写不下去了")])])},[],!1,null,null,null);s.default=e.exports}}]);