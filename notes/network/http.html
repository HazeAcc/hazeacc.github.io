<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP 协议 | 山风笔记集</title>
    <meta name="description" content="记录并分享个人所整理的学习知识的笔记与教程">
    <link rel="icon" href="/imgs/favicon.ico">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-158846445-2"></script>
  <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'UA-158846445-2');
        </script>
    
    <link rel="preload" href="/assets/css/0.styles.c0e52d69.css" as="style"><link rel="preload" href="/assets/js/app.8447d795.js" as="script"><link rel="preload" href="/assets/js/2.bd61a9fd.js" as="script"><link rel="preload" href="/assets/js/71.f8d75019.js" as="script"><link rel="prefetch" href="/assets/js/10.c23beeee.js"><link rel="prefetch" href="/assets/js/11.a5f8f4b5.js"><link rel="prefetch" href="/assets/js/12.3d44f3b2.js"><link rel="prefetch" href="/assets/js/13.85e66995.js"><link rel="prefetch" href="/assets/js/14.c61deefc.js"><link rel="prefetch" href="/assets/js/15.d567712f.js"><link rel="prefetch" href="/assets/js/16.0bf83400.js"><link rel="prefetch" href="/assets/js/17.39f15163.js"><link rel="prefetch" href="/assets/js/18.e190cbd6.js"><link rel="prefetch" href="/assets/js/19.b00f5399.js"><link rel="prefetch" href="/assets/js/20.24139e2e.js"><link rel="prefetch" href="/assets/js/21.f057fb05.js"><link rel="prefetch" href="/assets/js/22.91c23498.js"><link rel="prefetch" href="/assets/js/23.7e4349d1.js"><link rel="prefetch" href="/assets/js/24.d6b5644e.js"><link rel="prefetch" href="/assets/js/25.652a598d.js"><link rel="prefetch" href="/assets/js/26.239a6015.js"><link rel="prefetch" href="/assets/js/27.264e242d.js"><link rel="prefetch" href="/assets/js/28.b8a526cb.js"><link rel="prefetch" href="/assets/js/29.015f761b.js"><link rel="prefetch" href="/assets/js/3.1fc8e7ad.js"><link rel="prefetch" href="/assets/js/30.0cec9f87.js"><link rel="prefetch" href="/assets/js/31.d44d1dfd.js"><link rel="prefetch" href="/assets/js/32.01db05fd.js"><link rel="prefetch" href="/assets/js/33.b6466c13.js"><link rel="prefetch" href="/assets/js/34.bfcf59c7.js"><link rel="prefetch" href="/assets/js/35.383304c9.js"><link rel="prefetch" href="/assets/js/36.1e6e18c6.js"><link rel="prefetch" href="/assets/js/37.14bf4a83.js"><link rel="prefetch" href="/assets/js/38.5e53f1ea.js"><link rel="prefetch" href="/assets/js/39.5bb4ec98.js"><link rel="prefetch" href="/assets/js/4.7a8bea82.js"><link rel="prefetch" href="/assets/js/40.6c608590.js"><link rel="prefetch" href="/assets/js/41.23bd194f.js"><link rel="prefetch" href="/assets/js/42.d5004363.js"><link rel="prefetch" href="/assets/js/43.0ce9fa33.js"><link rel="prefetch" href="/assets/js/44.3fe716fe.js"><link rel="prefetch" href="/assets/js/45.32c5871d.js"><link rel="prefetch" href="/assets/js/46.b6783264.js"><link rel="prefetch" href="/assets/js/47.f8aab6d2.js"><link rel="prefetch" href="/assets/js/48.1f037f95.js"><link rel="prefetch" href="/assets/js/49.572445ce.js"><link rel="prefetch" href="/assets/js/5.9397a36a.js"><link rel="prefetch" href="/assets/js/50.7180282b.js"><link rel="prefetch" href="/assets/js/51.5e501b8b.js"><link rel="prefetch" href="/assets/js/52.f9837e49.js"><link rel="prefetch" href="/assets/js/53.d3df370a.js"><link rel="prefetch" href="/assets/js/54.6f904856.js"><link rel="prefetch" href="/assets/js/55.fc396f14.js"><link rel="prefetch" href="/assets/js/56.48304ea5.js"><link rel="prefetch" href="/assets/js/57.923bb766.js"><link rel="prefetch" href="/assets/js/58.5987358c.js"><link rel="prefetch" href="/assets/js/59.5c2eeb34.js"><link rel="prefetch" href="/assets/js/6.2f1db989.js"><link rel="prefetch" href="/assets/js/60.4ec959b6.js"><link rel="prefetch" href="/assets/js/61.52d60d03.js"><link rel="prefetch" href="/assets/js/62.f341f0fc.js"><link rel="prefetch" href="/assets/js/63.291774ef.js"><link rel="prefetch" href="/assets/js/64.3da1e937.js"><link rel="prefetch" href="/assets/js/65.44f41773.js"><link rel="prefetch" href="/assets/js/66.aea611c0.js"><link rel="prefetch" href="/assets/js/67.9432b5c4.js"><link rel="prefetch" href="/assets/js/68.f8b420bc.js"><link rel="prefetch" href="/assets/js/69.bd196935.js"><link rel="prefetch" href="/assets/js/7.d3342e12.js"><link rel="prefetch" href="/assets/js/70.5f94436d.js"><link rel="prefetch" href="/assets/js/72.22a2029f.js"><link rel="prefetch" href="/assets/js/73.b5675a90.js"><link rel="prefetch" href="/assets/js/74.b9910b21.js"><link rel="prefetch" href="/assets/js/75.5aa44913.js"><link rel="prefetch" href="/assets/js/76.db5e59d0.js"><link rel="prefetch" href="/assets/js/77.e4edf460.js"><link rel="prefetch" href="/assets/js/78.adaa1ebd.js"><link rel="prefetch" href="/assets/js/79.c98afd34.js"><link rel="prefetch" href="/assets/js/8.f122493c.js"><link rel="prefetch" href="/assets/js/80.dae99de7.js"><link rel="prefetch" href="/assets/js/81.c8c4cc78.js"><link rel="prefetch" href="/assets/js/82.b8f7657a.js"><link rel="prefetch" href="/assets/js/83.708b497a.js"><link rel="prefetch" href="/assets/js/84.e5cf0bec.js"><link rel="prefetch" href="/assets/js/85.677ae3f9.js"><link rel="prefetch" href="/assets/js/86.b7a99301.js"><link rel="prefetch" href="/assets/js/87.4b8fd909.js"><link rel="prefetch" href="/assets/js/9.095bc7b5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c0e52d69.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">山风笔记集</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/" class="nav-link router-link-active">笔记导航</a></li><li class="dropdown-item"><!----> <a href="/notes/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/notes/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/notes/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/notes/network/" class="nav-link router-link-active">网络</a></li><li class="dropdown-item"><!----> <a href="/notes/algorithm/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/notes/tools/" class="nav-link">工具</a></li></ul></div></div><div class="nav-item"><a href="/pages/recent.html" class="nav-link">最近</a></div><div class="nav-item"><a href="/pages/msg-board.html" class="nav-link">留言</a></div><div class="nav-item"><a href="/pages/about.html" class="nav-link">关于</a></div><div class="nav-item"><a href="https://www.ceynri.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.github.com/ceynri" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/" class="nav-link router-link-active">笔记导航</a></li><li class="dropdown-item"><!----> <a href="/notes/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/notes/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/notes/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/notes/network/" class="nav-link router-link-active">网络</a></li><li class="dropdown-item"><!----> <a href="/notes/algorithm/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/notes/tools/" class="nav-link">工具</a></li></ul></div></div><div class="nav-item"><a href="/pages/recent.html" class="nav-link">最近</a></div><div class="nav-item"><a href="/pages/msg-board.html" class="nav-link">留言</a></div><div class="nav-item"><a href="/pages/about.html" class="nav-link">关于</a></div><div class="nav-item"><a href="https://www.ceynri.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.github.com/ceynri" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/notes/network/" class="sidebar-link">浏览器与网络</a></li><li><a href="/notes/network/from-url-to-loaded.html" class="sidebar-link">从URL到页面加载完成</a></li><li><a href="/notes/network/cache.html" class="sidebar-link">浏览器缓存</a></li><li><a href="/notes/network/dns.html" class="sidebar-link">DNS 协议</a></li><li><a href="/notes/network/transport-layer-protocol.html" class="sidebar-link">传输层协议</a></li><li><a href="/notes/network/http.html" class="active sidebar-link">HTTP 协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/network/http.html#特点" class="sidebar-link">特点</a></li><li class="sidebar-sub-header"><a href="/notes/network/http.html#工作简要流程" class="sidebar-link">工作简要流程</a></li><li class="sidebar-sub-header"><a href="/notes/network/http.html#请求方法" class="sidebar-link">请求方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/network/http.html#get-与-post-的区别" class="sidebar-link">GET 与 POST 的区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/network/http.html#状态码" class="sidebar-link">状态码</a></li><li class="sidebar-sub-header"><a href="/notes/network/http.html#版本" class="sidebar-link">版本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/network/http.html#http-1-0" class="sidebar-link">HTTP/1.0</a></li><li class="sidebar-sub-header"><a href="/notes/network/http.html#http-1-1" class="sidebar-link">HTTP/1.1</a></li><li class="sidebar-sub-header"><a href="/notes/network/http.html#http-2-0" class="sidebar-link">HTTP/2.0</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http-协议"><a href="#http-协议" aria-hidden="true" class="header-anchor">#</a> HTTP 协议</h1> <p>超文本传输协议（<strong>H</strong>yper<strong>T</strong>ext <strong>T</strong>ransfer <strong>P</strong>rotocol）是万维网中非常重要的基础，作为应用层协议，承担起了网络数据通信的绝大部分工作。</p> <h2 id="特点"><a href="#特点" aria-hidden="true" class="header-anchor">#</a> 特点</h2> <ul><li>简单：基于<code>请求-响应</code>的模式，发起请求时只需指定请求方法（GET、POST）和路径</li> <li>灵活：支持不同格式的数据传输，具有非常多的可选字段</li> <li>无连接：每次连接只处理一个请求，降低资源消耗，可以同时服务多个客户端</li> <li>无状态：对事物处理无记忆能力，前一次请求和后一次没有相连关系，从而可以更快的应答</li></ul> <br> <h2 id="工作简要流程"><a href="#工作简要流程" aria-hidden="true" class="header-anchor">#</a> 工作简要流程</h2> <ul><li>在发送 HTTP 请求之前，我们先建立 TCP 连接（三次握手）</li> <li>通过 TCP 套接字，客户端将 HTTP 请求发送给服务端，默认的 http 端口为 80</li> <li>服务端收到请求后进行解析，处理后将结果通过 TCP 套接字返还给客户端</li> <li>客户端收到数据后进行解析，将不同的内容以不同的形式进行显示或使用</li> <li>根据 connection 模式的不同，服务端会主动关闭 TCP 连接，或者维持该连接一段时间。</li></ul> <br> <h2 id="请求方法"><a href="#请求方法" aria-hidden="true" class="header-anchor">#</a> 请求方法</h2> <p>HTTP/1.1 定义了八种方法以不同方式操作指定的资源：</p> <table><thead><tr><th>方法</th> <th>作用</th></tr></thead> <tbody><tr><td>GET</td> <td>向指定资源发出获取请求。GET 应只用在读取数据上</td></tr> <tr><td>HEAD</td> <td>与 GET 类似，只保留 HTTP Header 不保留 Body，得到必要信息的同时节约带宽</td></tr> <tr><td>POST</td> <td>向指定资源提交数据，请求服务器进行处理</td></tr> <tr><td>PUT</td> <td>向指定资源位置上传其最新内容</td></tr> <tr><td>DELETE</td> <td>请求服务器删除 Request-URI 所标识的资源</td></tr> <tr><td>TRACE</td> <td>回显服务器收到的请求，主要用于测试或诊断</td></tr> <tr><td>OPTIONS</td> <td>返回该资源所支持的所有 HTTP 方法</td></tr> <tr><td>CONNECT</td> <td>用于代理服务器，让代理服务器代替用户去获取其他网页</td></tr></tbody></table> <p>其中，我们一般用户用的最多的就是 GET 请求与 POST 请求。</p> <p>对于 GET、HEAD、POST 这三种请求，如果：</p> <ul><li>没有添加自定义头（比如 token、Authentication）</li> <li><code>Content-Type</code> 为<code>text/plain</code>、<code>multipart/form-data</code>、<code>application/x-www-form-urlencoded</code> 其中一种</li></ul> <p>该请求则被视为<strong>简单请求</strong>。</p> <p>而其他的请求（一般以 ajax 请求形式）就属于非简单请求了。</p> <h3 id="get-与-post-的区别"><a href="#get-与-post-的区别" aria-hidden="true" class="header-anchor">#</a> GET 与 POST 的区别</h3> <table><thead><tr><th>方面</th> <th>GET</th> <th>POST</th></tr></thead> <tbody><tr><td>定义</td> <td>从指定的资源请求数据</td> <td>向指定的资源提交要被处理的数据</td></tr> <tr><td>用途</td> <td>一般用于获取资源，不应该去修改资源</td> <td>更多用于提交表单，处理敏感数据</td></tr> <tr><td>提交数据</td> <td>将附带的数据以键值对的形式加在 URL 末尾实现的（以<code>?</code>开头），有数据长度的限制</td> <td>将附带的数据以键值对的形式加在 HTTP Body 中发送，对数据长度没有要求</td></tr> <tr><td>缓存</td> <td>能够被浏览器缓存，可以存为书签、有历史记录</td> <td>不行</td></tr> <tr><td>安全</td> <td>请求的数据暴露在 URL 中，任何人都能看到，安全性较差</td> <td>请求数据不显示于 URL，且不会被浏览器或服务器缓存，安全性相对较好</td></tr> <tr><td>幂等</td> <td>我们一般要求它符合幂等性</td> <td>一般不具幂等性</td></tr></tbody></table> <blockquote><p>幂等性即多次操作与单次操作得到的结果都是相同的，好似“1 的三次方仍然等于 1”一样。</p></blockquote> <br> <h2 id="状态码"><a href="#状态码" aria-hidden="true" class="header-anchor">#</a> 状态码</h2> <table><thead><tr><th>状态码</th> <th>类别</th> <th>解释</th></tr></thead> <tbody><tr><td>1XX</td> <td>Informational（信息）</td> <td>接收的请求正在处理</td></tr> <tr><td>2XX</td> <td>Success（成功）</td> <td>请求正常处理完毕</td></tr> <tr><td>3XX</td> <td>Redirection（重定向）</td> <td>需要进行附加操作以完成请求</td></tr> <tr><td>4XX</td> <td>Client Error（客户端错误）</td> <td>服务器无法处理请求</td></tr> <tr><td>5XX</td> <td>Server Error（服务器错误）</td> <td>服务器处理请求出错</td></tr></tbody></table> <p>常见的一些状态码：</p> <table><thead><tr><th>状态码</th> <th>类别</th> <th>解释</th></tr></thead> <tbody><tr><td>200</td> <td>OK</td> <td>客户端请求成功</td></tr> <tr><td>301</td> <td>Moved Permanently</td> <td>永久重定向。浏览器会自动定向到返回信息里的新 URI</td></tr> <tr><td>302</td> <td>Found</td> <td>临时重定向。与 301 类似，但资源只是临时被移动</td></tr> <tr><td>304</td> <td>Not Modified</td> <td>所请求的资源未修改，可以复用协商缓存</td></tr> <tr><td>400</td> <td>Bad Request</td> <td>客户端请求有语法错误，不能被服务器所理解</td></tr> <tr><td>401</td> <td>Unauthorized</td> <td>请求未经授权，请求要求用户身份认证</td></tr> <tr><td>403</td> <td>Forbidden</td> <td>服务器收到请求，但是拒绝提供服务</td></tr> <tr><td>404</td> <td>Not Found</td> <td>请求资源不存在（如输入了错误的 URL）</td></tr> <tr><td>500</td> <td>Internal Server Error</td> <td>服务器内部发生不可预期的错误</td></tr> <tr><td>503</td> <td>Server Unavailable</td> <td>由于超载或系统维护，服务器暂时的无法处理客户端的请求</td></tr></tbody></table> <br> <h2 id="版本"><a href="#版本" aria-hidden="true" class="header-anchor">#</a> 版本</h2> <p>比较常提到的 HTTP 协议版本一般有 1.0、1.1、2.0。</p> <h3 id="http-1-0"><a href="#http-1-0" aria-hidden="true" class="header-anchor">#</a> HTTP/1.0</h3> <p>HTTP/1.0 在设计时，为了提高服务器系统的响应效率，规定浏览器与服务器只保持短暂的连接，每次 HTTP 请求都要与服务器建立一次 TCP 连接，并在请求结束后断开该连接。</p> <p>但随着网络的发展，网页变得越来越复杂，很快 HTTP/1.0 就更不上时代了。因为对于一个网页，客户端往往需要多次请求才能完整地显示它（比如存在图片等其他资源），而 TCP 连接的无法复用使得每次 HTTP 请求都得经历三次握手、慢启动的过程，反而使开销增大。</p> <p>于是很快，HTTP/1.1 版本出现了。</p> <br> <h3 id="http-1-1"><a href="#http-1-1" aria-hidden="true" class="header-anchor">#</a> HTTP/1.1</h3> <p>HTTP/1.1 很大的一个特点就是支持持久连接（且为默认值）。在一个 TCP 连接上我们可以多次发起 HTTP 请求并得到响应，减少了建立和关闭连接的消耗和延迟。</p> <p>在 HTTP/1.1 中，我们使用 <code>Connection</code> 请求头字段作为连接的持久性的设置。使用 <code>keep-alive</code> 则为默认的长连接，而 <code>close</code> 则表明自己并不想维持长连接。</p> <p>除此以外，HTTP/1.1 还增加了一些其他功能：</p> <ul><li>Cache 缓存使用 <code>ETag</code> 与 <code>If-None-Match</code> 的新字段，解决了旧字段的误差、精度、性能问题</li> <li><code>Host</code> 请求头字段，允许服务器在相同 ip 地址与端口号的情况下配置不同的 web 站点</li> <li>通过指定 <code>RANGE:bytes=XXXX</code>，实现文件从 XXXX Bytes 开始的断点续传</li> <li>...</li></ul> <br> <h3 id="http-2-0"><a href="#http-2-0" aria-hidden="true" class="header-anchor">#</a> HTTP/2.0</h3> <p>HTTP/1.1 在各方面而言做的都还不错，所以一直没有推出新版本。不过随着网络的继续发展，我们开始更加关注 HTTP 协议的性能，想要在其中取得更加好的效果。</p> <p>我们能够发现 HTTP/1.1 有着这些缺点：</p> <ul><li>虽然 1.1 通过管道技术实现一次性发送多个请求，但如果出现队头阻塞（即第一个请求阻塞），后面的请求也得跟着等待</li> <li>只能由客户端单向发起请求</li> <li>无记忆性使得报文头信息冗余量大</li> <li>通过文本传输，数据未压缩</li></ul> <p>于是 HTTP/2.0 针对性能提出了几个优化特性：</p> <h4 id="二进制分帧"><a href="#二进制分帧" aria-hidden="true" class="header-anchor">#</a> 二进制分帧</h4> <p>原来的纯文本传输非常的直白简单，但是由于文本的多样性，在解析和拓展上比较麻烦。而 HTTP/2.0 最大的特点就是采用二进制的形式传输数据，从而为后续的优化提供了更大的空间。</p> <p>HTTP/2.0 中，数据以消息的形式发送，而一个消息可以被分为多个帧，每一帧的首部都有流标识，从而允许每个帧乱序发送，收到之后再进行组装。</p> <h4 id="多路复用"><a href="#多路复用" aria-hidden="true" class="header-anchor">#</a> 多路复用</h4> <p>在 HTTP/1.X 中，因为队头阻塞机制，多请求并发发送需要使用多个 TCP 连接，每个 TCP 连接还要握手、慢开始，且会受到浏览器单域名并发连接上限的限制（6~8 个）。</p> <p>而在 HTTP/2.0 中，所有请求都复用一个 TCP 连接，通过帧的标识就可以知道该帧属于哪一个请求，从而大大提高性能。</p> <blockquote><p>不过，多路复用只解决了 HTTP 的队头阻塞问题，而 TCP 队头阻塞的问题仍然存在，这是传输层层面导致的结果。</p></blockquote> <h4 id="首部压缩"><a href="#首部压缩" aria-hidden="true" class="header-anchor">#</a> 首部压缩</h4> <p>由于多个 HTTP 请求之间往往会有较多的重复头信息，HTTP/2.0 采用了首部压缩的方式（例如 HPACK 压缩格式），在服务器与客户端两边同时维护一个索引表，对于已经出现过的头信息，将其保存为 value，后续只需传输更短的 key，另一端收到后即可还原为 value。</p> <h4 id="服务端推送"><a href="#服务端推送" aria-hidden="true" class="header-anchor">#</a> 服务端推送</h4> <p>在 HTTP/2.0，我们允许服务器在收到客户端的请求后，主动地推送其他资源。</p> <p>按照原本的流程，如果客户端获取一份 HTML 文档，只有在进行预解析后才会发起新的请求去获得关联的文件；而服务端推送机制则可以将这些文件与 HTML 文档一起发送给客户端，从而减少一定的延迟。</p> <br></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/notes/network/transport-layer-protocol.html" class="prev">
          传输层协议
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8447d795.js" defer></script><script src="/assets/js/2.bd61a9fd.js" defer></script><script src="/assets/js/71.f8d75019.js" defer></script>
  </body>
</html>
